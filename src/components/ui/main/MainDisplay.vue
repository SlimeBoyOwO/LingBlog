<template>
  <section
    id="home"
    class="h-screen w-full flex relative items-center justify-center px-6 snap-start"
  >
    <!-- èƒŒæ™¯å±‚ -->
    <div
      class="absolute inset-0 z-[-2] bg-[url('@/assets/backgrounds/homepage_bg.jpg')] bg-cover bg-bottom bg-no-repeat"
    ></div>
    <!-- æ˜Ÿç©ºå±‚ -->
    <HomeBackground></HomeBackground>

    <div class="text-center max-w-4xl mx-auto">
      <div
        class="inline-block mb-4 px-4 py-1.5 rounded-full border border-cyan-500/30 bg-cyan-500/10 text-cyan-300 text-xs font-semibold tracking-wider uppercase animate-fade-in-up"
      >
        Welcome to Ling's Scholarly House
      </div>
      <h1
        class="font-display text-4xl md:text-6xl lg:text-7xl font-bold tracking-tight mb-8 leading-tight animate-fade-in-up"
        style="animation-delay: 0.1s"
      >
        <span class="block text-white">ä¸ä½ ä¸€åŒé‚€çº¦</span>
        <span
          class="bg-clip-text text-transparent bg-linear-to-r from-cyan-400 via-blue-500 to-purple-600 text-glow"
        >
          åœ¨è¾½åŸä¸æ˜Ÿç©ºä¹‹ä¸­
        </span>
      </h1>
      <p
        class="text-gray-400 text-lg md:text-xl max-w-2xl mx-auto mb-10 leading-relaxed animate-fade-in-up"
        style="animation-delay: 0.2s"
      >
        ä½ å¥½å‘€æ—…è¡Œè€…<span class="text-white font-semibold">(*^â–½^*)</span>ã€‚
        å·¥ä½œç´¯äº†ä¸å¦¨ä¸€èµ·å·ä¸ªæ‡’ã€‚å’Œæˆ‘ä¸€èµ·ååœ¨è‰åœ°ä¸Šä»°æœ›äº›è®¸æ˜Ÿç©ºå¦‚ä½•ï¼Ÿå¸Œæœ›ä½ æœ‰ç¾å¥½çš„ä¸€å¤©~
      </p>

      <div
        class="flex flex-col sm:flex-row justify-center gap-4 animate-fade-in-up"
        style="animation-delay: 0.3s"
      >
        <button
          @click="scrollTo('about')"
          class="px-8 py-4 rounded-full bg-cyan-500 text-gray-800 font-bold hover:bg-cyan-400 transition-all hover:shadow-[0_0_30px_-5px_rgba(6,182,212,0.6)] hover:-translate-y-1"
        >
          äº†è§£æˆ‘ â©Œâ©Šâ©Œ
        </button>
        <!-- ä¿®æ”¹ï¼šç‚¹å‡»è§¦å‘å‹æƒ…é“¾æ¥å¼¹çª— -->
        <button
          @click="showFriendLinks = true"
          class="px-8 py-4 rounded-full glass-panel hover:bg-white/10 transition-all hover:-translate-y-1 text-white border border-white/20"
        >
          å‹æƒ…é“¾æ¥â¤
        </button>
      </div>
    </div>

    <!-- åº•éƒ¨ç®­å¤´ -->
    <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-bounce opacity-50">
      <div class="animate-bounce opacity-50">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M19 14l-7 7m0 0l-7-7m7 7V3"
          ></path>
        </svg>
      </div>
    </div>

    <div v-if="showFriendLinks">
      <!-- 1. èƒŒæ™¯æ¨¡ç³Šé®ç½©å±‚ -->
      <div
        class="absolute inset-0 bg-black/60 backdrop-blur-md transition-opacity duration-500"
        @click="showFriendLinks = false"
      ></div>
    </div>

    <!-- å‹æƒ…é“¾æ¥ -->
    <Transition name="modal">
      <div v-if="showFriendLinks" class="fixed inset-0 z-50 flex items-center justify-center p-4">
        <!-- 2. æ¶²æ€æ¯›ç»ç’ƒçª—å£ -->
        <div
          class="relative w-full max-w-3xl bg-gray-900/40 backdrop-blur-xl border border-white/10 rounded-3xl shadow-2xl p-6 md:p-8 overflow-hidden transform transition-all"
        >
          <!-- è£…é¥°ï¼šèƒŒæ™¯å…‰æ™• -->
          <div
            class="absolute top-0 right-0 -mr-20 -mt-20 w-64 h-64 rounded-full bg-cyan-500/20 blur-3xl pointer-events-none"
          ></div>
          <div
            class="absolute bottom-0 left-0 -ml-20 -mb-20 w-64 h-64 rounded-full bg-purple-500/20 blur-3xl pointer-events-none"
          ></div>

          <!-- å…³é—­æŒ‰é’® -->
          <button
            @click="showFriendLinks = false"
            class="absolute top-4 right-4 text-white/50 hover:text-white transition-colors"
          >
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              ></path>
            </svg>
          </button>

          <!-- æ ‡é¢˜åŒºåŸŸ -->
          <div class="relative z-10 mb-6 text-center">
            <h2 class="text-2xl md:text-3xl font-bold text-white mb-4">
              ä¸€åŒæ—…è¡Œ <span class="text-cyan-400">Links</span>
            </h2>
            <p class="text-gray-400 text-sm md:text-base">
              å¥¹ä»¬æ˜¯æˆ‘åœ¨æ¼«é•¿çš„é“¶æ²³é‡Œé‡åˆ°çš„å¯çˆ±çš„å°æœ‹å‹ä»¬æï¼Œå¿«å»éªšæ‰° =â©Œâ©Šâ©Œ=
            </p>
          </div>

          <!-- é“¾æ¥å¡ç‰‡åˆ—è¡¨ -->
          <div
            class="relative z-10 grid grid-cols-1 md:grid-cols-2 gap-4 max-h-[60vh] overflow-y-auto custom-scrollbar p-2 pr-2"
          >
            <a
              v-for="(friend, index) in friendsList"
              :key="index"
              :href="friend.url"
              target="_blank"
              class="group flex items-center gap-4 p-4 rounded-2xl bg-white/5 border border-white/5 hover:bg-white/10 hover:border-cyan-500/30 transition-all duration-300 hover:-translate-y-1"
            >
              <!-- å·¦è¾¹ï¼šåœ†å½¢å¤´åƒ -->
              <div class="relative shrink-0">
                <div
                  class="w-14 h-14 rounded-full overflow-hidden border-2 border-white/10 group-hover:border-cyan-400 transition-colors"
                >
                  <img :src="friend.avatar" :alt="friend.name" class="w-full h-full object-cover" />
                </div>
              </div>

              <!-- å³è¾¹ï¼šæ ‡é¢˜å’Œä»‹ç» -->
              <div class="flex flex-col min-w-0">
                <h3
                  class="text-white font-bold text-base truncate group-hover:text-cyan-300 transition-colors"
                >
                  {{ friend.name }}
                </h3>
                <p
                  class="text-gray-400 text-xs sm:text-sm line-clamp-2 mt-0.5 group-hover:text-gray-300"
                >
                  {{ friend.desc }}
                </p>
              </div>
            </a>
          </div>
        </div>
      </div>
    </Transition>
  </section>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { useScrollTo } from '@/composables/useScrollTo'
import HomeBackground from '../HomeBackground.vue'

import xiaoPingGuo from '@/assets/friends/å°è‹¹æœ.jpg'
import laoZhang from '@/assets/friends/è‡­è€å¼ .jpg'
import mengLinXi from '@/assets/friends/MeowLynxSea.webp'

const { scrollTo } = useScrollTo()

// --- å‹æƒ…é“¾æ¥é€»è¾‘ ---

// æ§åˆ¶å¼¹çª—æ˜¾ç¤º
const showFriendLinks = ref(false)

// å‹é“¾æ•°æ®æ¥å£å®šä¹‰
interface Friend {
  name: string
  desc: string
  avatar: string
  url: string
}

// æ¨¡æ‹Ÿæ•°æ® (ä½ å¯ä»¥æ›¿æ¢ä¸ºçœŸå®çš„APIè¯·æ±‚æˆ–é™æ€æ•°æ®)
const friendsList = ref<Friend[]>([
  {
    name: 'ä¸ƒæ¯›é’±çš„è‹¹æœğŸ',
    desc: 'è¿™æ˜¯ä¸€åªä¼šå†™Minecraftæ’ä»¶çš„ï¼Œç‰¹åˆ«å¯çˆ±çš„å°è‹¹æœ=w=',
    avatar: xiaoPingGuo,
    url: 'https://70centsapple.top/#',
  },
  {
    name: 'WalkCat èµ°çŒ«',
    desc: 'ä¸€åªç‰¹åˆ«æ‡’ï¼Œç‰¹åˆ«æ†¨ï¼Œç‰¹åˆ«å…«å˜å‘€è·¯çš„çŒ«',
    avatar: laoZhang,
    url: '#',
  },
  {
    name: 'æ¢¦å‡Œæ±',
    desc: 'è¶…èªæ˜å…¨åŠŸèƒ½çš„ç°è‰²å¯çˆ±çŒ«å¨˜ï¼Œè¶…çº§é¡¹ç›®ç”Ÿäº§å¦ˆå¦ˆ',
    avatar: mengLinXi,
    url: 'https://www.meowdream.cn/',
  },
])
</script>

<style scoped>
/* æ¨¡æ€æ¡†åŠ¨ç”» */
.modal-enter-active,
.modal-leave-active {
  transition: all 0.3s ease;
}

.modal-enter-from,
.modal-leave-to {
  opacity: 0;
}

.modal-enter-to,
.modal-leave-from {
  opacity: 1;
}

/* è‡ªå®šä¹‰æ»šåŠ¨æ¡ (é’ˆå¯¹å¡ç‰‡åˆ—è¡¨åŒºåŸŸ) */
.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
}
.custom-scrollbar::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}
.custom-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* ç¡®ä¿æ–‡å­—å‘å…‰æ•ˆæœå¤ç”¨ */
.text-glow {
  text-shadow: 0 0 20px rgba(6, 182, 212, 0.5);
}
</style>
